
  <target name="javadoc" depends="init">
    <delete quiet="true" file="${dist}/resin-javadoc-${version}.war"/>

    <delete quiet="true" dir="${build}/javadoc"/>

    <mkdir dir="${build}/javadoc/web-app"/>

    <javadoc destdir="${build}/javadoc/web-app/" 
      maxmemory="1024m"
      use="true" 
      author="true"
      version="true"
      windowtitle="Resin ${version}"
      overview="${modules}/resin/src/overview.html"	     
      source="1.6"
      splitindex="yes">

      <packageset dir="${modules}/ejb/src"/>
      <packageset dir="${modules}/hessian/src"/>
      <packageset dir="${modules}/servlet16/src"/>
      <packageset dir="${modules}/jcache/src"/>
      <!--
      <packageset dir="${modules}/jpa/src"/>
      -->
      <packageset dir="${modules}/jaxstream/src"/>
      <packageset dir="${modules}/jca/src"/>
      <packageset dir="${modules}/jms/src"/>
      <packageset dir="${modules}/jstl/src"/>
      <packageset dir="${modules}/jta/src"/>
      <packageset dir="${modules}/quercus/src"/>
      <!--
      <packageset dir="${modules}/osgi/src"/>
      -->
      <packageset dir="${modules}/resin/src"/>
      <!--
      <packageset dir="${modules}/script/src"/>
      <packageset dir="${modules}/unix/src"/>
      -->
      <packageset dir="${modules}/kernel/src"/>
      <packageset dir="${modules}/resource/src"/>
      <packageset dir="${modules}/webbeans/src"/>
      <!--
      <packageset dir="${modules}/webutil/src"/>
      -->
      <packageset dir="${promodules}/pro/src"/>

    <!-- For any linked documents here, the href="xxx" must be matched
       - by an <api id="xxx"/> in web.xml
    <link href="${jdkapi.href}"/>
      -->
    </javadoc>

    <mkdir dir="${dist}"/>

    <jar 
      jarfile="${dist}/resin-javadoc-${version}.war"
      basedir="${build}/javadoc/web-app"
      compress="true"
      index="false">
      <exclude name="**/timestamp"/>
      <exclude name="**/WEB-INF/lib"/>

      <exclude name="**/work"/>
      <exclude name="**/tmp"/>
      <exclude name="**/.*"/>
      <exclude name="**/.svn"/>
      <exclude name="**/debug.log"/>
    </jar>

  </target>
